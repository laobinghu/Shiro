import{r as t,j as o}from"./index-CaQNHPqR.js";import{u as q,f as B,o as G,s as H,a as J}from"./floating-ui.react-dom-DtNc5yOO.js";import{u as K}from"./viewport-CmXhBg3S.js";import"./owner-EYyAWlgp.js";import{m as Q}from"./spring-C80N1tKa.js";import{u as X}from"./use-event-callback-D-ihFmfO.js";import{c as b}from"./helper-CB7ordUq.js";import{P as Z,R as _}from"./index-DknxroSg.js";import{A as $}from"./index-CbtsY2H5.js";import{m as R}from"./proxy-BY0eS7VU.js";function ee(e,...n){e&&e.addEventListener&&e.addEventListener(...n)}function te(e,...n){e&&e.removeEventListener&&e.removeEventListener(...n)}const oe=["mousedown","touchstart"],ne=(e,n,a=oe)=>{const i=t.useRef(n);t.useEffect(()=>{i.current=n},[n]),t.useEffect(()=>{const l=r=>{const{current:s}=e;s&&!s.contains(r.target)&&i.current(r)};for(const r of a)ee(document,r,l);return()=>{for(const r of a)te(document,r,l)}},[a,e])},ve=function(e){if(K()&&e.mobileAsSheet){const{triggerElement:a,TriggerComponent:i,triggerComponentProps:l}=e,r=a||(i?t.createElement(i,l):null);return o.jsx(Z,{content:e.children,...e.sheet,children:r})}return o.jsx(se,{...e})},re=t.createContext(null),se=function(n){const{headless:a=!1,wrapperClassName:i,TriggerComponent:l,triggerElement:r,trigger:s="hover",padding:j,offset:N,popoverWrapperClassNames:F,popoverClassNames:O,debug:E,animate:ae=!0,as:z="div",type:v="popover",triggerComponentProps:L,isDisabled:A,onOpen:S,onClose:I,to:T,asChild:Y,...p}=n,[c,C]=t.useState(!1),{x:P,y:D,refs:f,strategy:V,isPositioned:W,elements:d,update:k}=q({middleware:p.middleware??[B({padding:j??20}),G(N??10),H()],strategy:p.strategy,placement:p.placement??"bottom-start",whileElementsMounted:p.whileElementsMounted});t.useEffect(()=>{if(c&&d.reference&&d.floating)return J(d.reference,d.floating,k)},[c,d,k]);const w=t.useRef(null);ne(w,()=>{(s=="click"||s=="both")&&u()});const u=t.useCallback(()=>{E||C(!1)},[E]),m=X(()=>{A||C(!0)}),y=t.useCallback(()=>{u()},[u]),x=t.useMemo(()=>{const h={};switch(s){case"click":return{...h,onClick:m};case"hover":return{...h,onMouseOver:m,onMouseOut:u};case"both":return{...h,onClick:m,onMouseOver:m,onMouseOut:y}}},[u,m,y,s]),g=r||(l?t.cloneElement(t.createElement(l,L),{tabIndex:0}):o.jsx(o.Fragment,{})),M=Y?t.cloneElement(typeof g=="string"?o.jsx("span",{children:g}):g,{...x,ref:f.setReference}):o.jsx(z,{role:s==="both"||s==="click"?"button":"note",className:b("inline-block",i),ref:f.setReference,...x,children:g});t.useEffect(()=>{f.floating.current&&c&&v==="popover"&&f.floating.current.focus()},[c]),t.useEffect(()=>{c?S?.():I?.()},[c]);const U=t.useMemo(()=>({close:u}),[u]);return n.children?o.jsxs(o.Fragment,{children:[M,o.jsx($,{children:c&&o.jsx(_,{to:T,children:o.jsx(R.div,{className:b("float-popover","relative z-[99]",F),...s==="hover"||s==="both"?x:{},ref:w,children:o.jsx(R.div,{tabIndex:-1,role:v==="tooltip"?"tooltip":"dialog",className:b(!a&&["rounded-xl border border-zinc-400/20 p-4 outline-none backdrop-blur-lg dark:border-zinc-500/30","bg-zinc-50/80 dark:bg-neutral-900/80"],"relative z-[2]",v==="tooltip"?"max-w-[25rem] break-all rounded-xl px-4 py-2 shadow-out-sm":"shadow-lg",O),ref:f.setFloating,initial:{translateY:"10px",opacity:0},animate:{translateY:"0px",opacity:1},exit:{translateY:"10px",opacity:0,transition:{type:"tween",duration:.2}},transition:Q,style:{position:V,top:D??"",left:P??"",visibility:W&&P!==null?"visible":"hidden"},children:o.jsx(re.Provider,{value:U,children:n.children})})})})})]}):M};export{ve as F};
