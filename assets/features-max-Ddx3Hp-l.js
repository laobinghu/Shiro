import{b as Ce,v as Re,d as Le,e as bt,g as be,h as D,f as S,c as I,j as Me,k as q,p as Q,n as N,l as Be,L as ds,S as fs,o as ps,q as je,i as M,r as at,s as lt,t as Mt,w as ms,x as gs,y as ys,z as Vt,A as vs,B as xs,C as Ps,D as Ts,E as Ss,F as Vs,G as As,H as Ds,I as Es,J as ws,K as Cs,N as Rs,O as Ls}from"./proxy-BY0eS7VU.js";import{r as Bt,a as bs,c as T,p as Fe,d as Ms,e as Bs,f as yt,g as jt,h as Ie,i as tt,m as et,j as ke,k as Ue,t as At,l as js,S as Oe,n as Fs,o as Is,q as ks,u as Us,v as Os,K as Ns,w as Gs,x as Hs,y as Ws,D as $s,z as zs,A as Ks}from"./visual-element-BWPUV8Sy.js";import{r as st,j as Xs,k as Ft}from"./index-CaQNHPqR.js";import{u as _s}from"./index-CbtsY2H5.js";function Ne(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let i=0;i<s;i++)if(t[i]!==e[i])return!1;return!0}const Ys=Re.length;function Ge(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Ge(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<Ys;s++){const i=Re[s],o=e.props[i];(Ce(o)||o===!1)&&(t[i]=o)}return t}const qs=[...be].reverse(),Zs=be.length;function Js(e){return t=>Promise.all(t.map(({animation:s,options:i})=>bs(e,s,i)))}function Qs(e){let t=Js(e),s=It(),i=!0;const o=a=>(l,u)=>{const h=Bt(e,u,a==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:d,transitionEnd:f,...p}=h;l={...l,...p,...f}}return l};function c(a){t=a(e)}function n(a){const{props:l}=e,u=Ge(e.parent)||{},h=[],d=new Set;let f={},p=1/0;for(let g=0;g<Zs;g++){const m=qs[g],v=s[m],y=l[m]!==void 0?l[m]:u[m],R=Ce(y),L=m===a?v.isActive:null;L===!1&&(p=g);let Y=y===u[m]&&y!==l[m]&&R;if(Y&&i&&e.manuallyAnimateOnMount&&(Y=!1),v.protectedKeys={...f},!v.isActive&&L===null||!y&&!v.prevProp||Le(y)||typeof y=="boolean")continue;const Et=ti(v.prevProp,y);let nt=Et||m===a&&v.isActive&&!Y&&R||g>p&&R,wt=!1;const Ct=Array.isArray(y)?y:[y];let G=Ct.reduce(o(m),{});L===!1&&(G={});const{prevResolvedValues:Rt={}}=v,hs={...Rt,...G},Lt=V=>{nt=!0,d.has(V)&&(wt=!0,d.delete(V)),v.needsAnimating[V]=!0;const b=e.getValue(V);b&&(b.liveStyle=!1)};for(const V in hs){const b=G[V],ot=Rt[V];if(f.hasOwnProperty(V))continue;let rt=!1;bt(b)&&bt(ot)?rt=!Ne(b,ot):rt=b!==ot,rt?b!=null?Lt(V):d.add(V):b!==void 0&&d.has(V)?Lt(V):v.protectedKeys[V]=!0}v.prevProp=y,v.prevResolvedValues=G,v.isActive&&(f={...f,...G}),i&&e.blockInitialAnimation&&(nt=!1),nt&&(!(Y&&Et)||wt)&&h.push(...Ct.map(V=>({animation:V,options:{type:m}})))}if(d.size){const g={};if(typeof l.initial!="boolean"){const m=Bt(e,Array.isArray(l.initial)?l.initial[0]:l.initial);m&&m.transition&&(g.transition=m.transition)}d.forEach(m=>{const v=e.getBaseTarget(m),y=e.getValue(m);y&&(y.liveStyle=!0),g[m]=v??null}),h.push({animation:g})}let x=!!h.length;return i&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(x=!1),i=!1,x?t(h):Promise.resolve()}function r(a,l){if(s[a].isActive===l)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(a,l)),s[a].isActive=l;const u=n(a);for(const h in s)s[h].protectedKeys={};return u}return{animateChanges:n,setActive:r,setAnimateFunction:c,getState:()=>s,reset:()=>{s=It(),i=!0}}}function ti(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ne(t,e):!1}function j(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function It(){return{animate:j(!0),whileInView:j(),whileHover:j(),whileTap:j(),whileDrag:j(),whileFocus:j(),exit:j()}}class B{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ei extends B{constructor(t){super(t),t.animationState||(t.animationState=Qs(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Le(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let si=0;class ii extends B{constructor(){super(...arguments),this.id=si++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);s&&!t&&o.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ni={animation:{Feature:ei},exit:{Feature:ii}},C={x:!1,y:!1};function He(){return C.x||C.y}function oi(e){return e==="x"||e==="y"?C[e]?null:(C[e]=!0,()=>{C[e]=!1}):C.x||C.y?null:(C.x=C.y=!0,()=>{C.x=C.y=!1})}function X(e,t,s,i={passive:!0}){return e.addEventListener(t,s,i),()=>e.removeEventListener(t,s)}const Dt=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function _(e){return{point:{x:e.pageX,y:e.pageY}}}const ri=e=>t=>Dt(t)&&e(t,_(t));function $(e,t,s,i){return X(e,t,ri(s),i)}function We({top:e,left:t,right:s,bottom:i}){return{x:{min:t,max:s},y:{min:e,max:i}}}function ai({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function li(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:i.y,right:i.x}}const $e=1e-4,ui=1-$e,ci=1+$e,ze=.01,hi=0-ze,di=0+ze;function A(e){return e.max-e.min}function fi(e,t,s){return Math.abs(e-t)<=s}function kt(e,t,s,i=.5){e.origin=i,e.originPoint=T(t.min,t.max,e.origin),e.scale=A(s)/A(t),e.translate=T(s.min,s.max,e.origin)-e.originPoint,(e.scale>=ui&&e.scale<=ci||isNaN(e.scale))&&(e.scale=1),(e.translate>=hi&&e.translate<=di||isNaN(e.translate))&&(e.translate=0)}function z(e,t,s,i){kt(e.x,t.x,s.x,i?i.originX:void 0),kt(e.y,t.y,s.y,i?i.originY:void 0)}function Ut(e,t,s){e.min=s.min+t.min,e.max=e.min+A(t)}function pi(e,t,s){Ut(e.x,t.x,s.x),Ut(e.y,t.y,s.y)}function Ot(e,t,s){e.min=t.min-s.min,e.max=e.min+A(t)}function K(e,t,s){Ot(e.x,t.x,s.x),Ot(e.y,t.y,s.y)}const Nt=()=>({translate:0,scale:1,origin:0,originPoint:0}),k=()=>({x:Nt(),y:Nt()}),Gt=()=>({min:0,max:0}),P=()=>({x:Gt(),y:Gt()});function w(e){return[e("x"),e("y")]}function ut(e){return e===void 0||e===1}function vt({scale:e,scaleX:t,scaleY:s}){return!ut(e)||!ut(t)||!ut(s)}function F(e){return vt(e)||Ke(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ke(e){return Ht(e.x)||Ht(e.y)}function Ht(e){return e&&e!=="0%"}function it(e,t,s){const i=e-s,o=t*i;return s+o}function Wt(e,t,s,i,o){return o!==void 0&&(e=it(e,o,i)),it(e,s,i)+t}function xt(e,t=0,s=1,i,o){e.min=Wt(e.min,t,s,i,o),e.max=Wt(e.max,t,s,i,o)}function Xe(e,{x:t,y:s}){xt(e.x,t.translate,t.scale,t.originPoint),xt(e.y,s.translate,s.scale,s.originPoint)}const $t=.999999999999,zt=1.0000000000001;function mi(e,t,s,i=!1){const o=s.length;if(!o)return;t.x=t.y=1;let c,n;for(let r=0;r<o;r++){c=s[r],n=c.projectionDelta;const{visualElement:a}=c.options;a&&a.props.style&&a.props.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&O(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,Xe(e,n)),i&&F(c.latestValues)&&O(e,c.latestValues))}t.x<zt&&t.x>$t&&(t.x=1),t.y<zt&&t.y>$t&&(t.y=1)}function U(e,t){e.min=e.min+t,e.max=e.max+t}function Kt(e,t,s,i,o=.5){const c=T(e.min,e.max,o);xt(e,t,s,c,i)}function O(e,t){Kt(e.x,t.x,t.scaleX,t.scale,t.originX),Kt(e.y,t.y,t.scaleY,t.scale,t.originY)}function _e(e,t){return We(li(e.getBoundingClientRect(),t))}function gi(e,t,s){const i=_e(e,s),{scroll:o}=t;return o&&(U(i.x,o.offset.x),U(i.y,o.offset.y)),i}const Ye=({current:e})=>e?e.ownerDocument.defaultView:null,Xt=(e,t)=>Math.abs(e-t);function yi(e,t){const s=Xt(e.x,t.x),i=Xt(e.y,t.y);return Math.sqrt(s**2+i**2)}class qe{constructor(t,s,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ht(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=yi(h.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:p}=h,{timestamp:x}=D;this.history.push({...p,timestamp:x});const{onStart:g,onMove:m}=this.handlers;d||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ct(d,this.transformPagePoint),S.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=ht(h.type==="pointercancel"?this.lastMoveEventInfo:ct(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,g),p&&p(h,g)},!Dt(t))return;this.dragSnapToOrigin=c,this.handlers=s,this.transformPagePoint=i,this.contextWindow=o||window;const n=_(t),r=ct(n,this.transformPagePoint),{point:a}=r,{timestamp:l}=D;this.history=[{...a,timestamp:l}];const{onSessionStart:u}=s;u&&u(t,ht(r,this.history)),this.removeListeners=Fe($(this.contextWindow,"pointermove",this.handlePointerMove),$(this.contextWindow,"pointerup",this.handlePointerUp),$(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),I(this.updatePoint)}}function ct(e,t){return t?{point:t(e.point)}:e}function _t(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ht({point:e},t){return{point:e,delta:_t(e,Ze(t)),offset:_t(e,vi(t)),velocity:xi(t,.1)}}function vi(e){return e[0]}function Ze(e){return e[e.length-1]}function xi(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,i=null;const o=Ze(e);for(;s>=0&&(i=e[s],!(o.timestamp-i.timestamp>Ms(t)));)s--;if(!i)return{x:0,y:0};const c=Bs(o.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const n={x:(o.x-i.x)/c,y:(o.y-i.y)/c};return n.x===1/0&&(n.x=0),n.y===1/0&&(n.y=0),n}function Pi(e,{min:t,max:s},i){return t!==void 0&&e<t?e=i?T(t,e,i.min):Math.max(e,t):s!==void 0&&e>s&&(e=i?T(s,e,i.max):Math.min(e,s)),e}function Yt(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function Ti(e,{top:t,left:s,bottom:i,right:o}){return{x:Yt(e.x,s,o),y:Yt(e.y,t,i)}}function qt(e,t){let s=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,i]=[i,s]),{min:s,max:i}}function Si(e,t){return{x:qt(e.x,t.x),y:qt(e.y,t.y)}}function Vi(e,t){let s=.5;const i=A(e),o=A(t);return o>i?s=yt(t.min,t.max-i,e.min):i>o&&(s=yt(e.min,e.max-o,t.min)),Me(0,1,s)}function Ai(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Pt=.35;function Di(e=Pt){return e===!1?e=0:e===!0&&(e=Pt),{x:Zt(e,"left","right"),y:Zt(e,"top","bottom")}}function Zt(e,t,s){return{min:Jt(e,t),max:Jt(e,s)}}function Jt(e,t){return typeof e=="number"?e:e[t]||0}const Ei=new WeakMap;class wi{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=P(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(_(u).point)},c=(u,h)=>{const{drag:d,dragPropagation:f,onDragStart:p}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oi(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),w(g=>{let m=this.getAxisMotionValue(g).get()||0;if(Q.test(m)){const{projection:v}=this.visualElement;if(v&&v.layout){const y=v.layout.layoutBox[g];y&&(m=A(y)*(parseFloat(m)/100))}}this.originPoint[g]=m}),p&&S.postRender(()=>p(u,h)),jt(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},n=(u,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:p,onDrag:x}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:g}=h;if(f&&this.currentDirection===null){this.currentDirection=Ci(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),x&&x(u,h)},r=(u,h)=>this.stop(u,h),a=()=>w(u=>this.getAnimationState(u)==="paused"&&this.getAxisMotionValue(u).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new qe(t,{onSessionStart:o,onStart:c,onMove:n,onSessionEnd:r,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:Ye(this.visualElement)})}stop(t,s){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&S.postRender(()=>c(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,i){const{drag:o}=this.getProps();if(!i||!Z(t,o,this.currentDirection))return;const c=this.getAxisMotionValue(t);let n=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(n=Pi(n,this.constraints[t],this.elastic[t])),c.set(n)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;t&&q(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Ti(i.layoutBox,t):this.constraints=!1,this.elastic=Di(s),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&w(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Ai(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!q(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const c=gi(i,o.root,this.visualElement.getTransformPagePoint());let n=Si(o.layout.layoutBox,c);if(s){const r=s(ai(n));this.hasMutatedConstraints=!!r,r&&(n=We(r))}return n}startAnimation(t){const{drag:s,dragMomentum:i,dragElastic:o,dragTransition:c,dragSnapToOrigin:n,onDragTransitionEnd:r}=this.getProps(),a=this.constraints||{},l=w(u=>{if(!Z(u,s,this.currentDirection))return;let h=a&&a[u]||{};n&&(h={min:0,max:0});const d=o?200:1e6,f=o?40:1e7,p={type:"inertia",velocity:i?t[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...c,...h};return this.startAxisValueAnimation(u,p)});return Promise.all(l).then(r)}startAxisValueAnimation(t,s){const i=this.getAxisMotionValue(t);return jt(this.visualElement,t),i.start(Ie(t,i,0,s,this.visualElement,!1))}stopAnimation(){w(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){w(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[s];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){w(s=>{const{drag:i}=this.getProps();if(!Z(s,i,this.currentDirection))return;const{projection:o}=this.visualElement,c=this.getAxisMotionValue(s);if(o&&o.layout){const{min:n,max:r}=o.layout.layoutBox[s];c.set(t[s]-T(n,r,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:i}=this.visualElement;if(!q(s)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};w(n=>{const r=this.getAxisMotionValue(n);if(r&&this.constraints!==!1){const a=r.get();o[n]=Vi({min:a,max:a},this.constraints[n])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),w(n=>{if(!Z(n,t,null))return;const r=this.getAxisMotionValue(n),{min:a,max:l}=this.constraints[n];r.set(T(a,l,o[n]))})}addListeners(){if(!this.visualElement.current)return;Ei.set(this.visualElement,this);const t=this.visualElement.current,s=$(t,"pointerdown",a=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(a)}),i=()=>{const{dragConstraints:a}=this.getProps();q(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,c=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),S.read(i);const n=X(window,"resize",()=>this.scalePositionWithinConstraints()),r=o.addEventListener("didUpdate",({delta:a,hasLayoutChanged:l})=>{this.isDragging&&l&&(w(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=a[u].translate,h.set(h.get()+a[u].translate))}),this.visualElement.render())});return()=>{n(),s(),c(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:c=!1,dragElastic:n=Pt,dragMomentum:r=!0}=t;return{...t,drag:s,dragDirectionLock:i,dragPropagation:o,dragConstraints:c,dragElastic:n,dragMomentum:r}}}function Z(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function Ci(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class Ri extends B{constructor(t){super(t),this.removeGroupControls=N,this.removeListeners=N,this.controls=new wi(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||N}unmount(){this.removeGroupControls(),this.removeListeners()}}const Qt=e=>(t,s)=>{e&&S.postRender(()=>e(t,s))};class Li extends B{constructor(){super(...arguments),this.removePointerDownListener=N}onPointerDown(t){this.session=new qe(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ye(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:Qt(t),onStart:Qt(s),onMove:i,onEnd:(c,n)=>{delete this.session,o&&S.postRender(()=>o(c,n))}}}mount(){this.removePointerDownListener=$(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const J={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function te(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const H={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const s=te(e,t.target.x),i=te(e,t.target.y);return`${s}% ${i}%`}},bi={correct:(e,{treeScale:t,projectionDelta:s})=>{const i=e,o=tt.parse(e);if(o.length>5)return i;const c=tt.createTransformer(e),n=typeof o[0]!="number"?1:0,r=s.x.scale*t.x,a=s.y.scale*t.y;o[0+n]/=r,o[1+n]/=a;const l=T(r,a,.5);return typeof o[2+n]=="number"&&(o[2+n]/=l),typeof o[3+n]=="number"&&(o[3+n]/=l),c(o)}};class Mi extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i,layoutId:o}=this.props,{projection:c}=t;ps(Bi),c&&(s.group&&s.group.add(c),i&&i.register&&o&&i.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),J.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:i,drag:o,isPresent:c}=this.props,n=i.projection;return n&&(n.isPresent=c,o||t.layoutDependency!==s||s===void 0||t.isPresent!==c?n.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?n.promote():n.relegate()||S.postRender(()=>{const r=n.getStack();(!r||!r.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),je.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Je(e){const[t,s]=_s(),i=st.useContext(ds);return Xs.jsx(Mi,{...e,layoutGroup:i,switchLayoutGroup:st.useContext(fs),isPresent:t,safeToRemove:s})}const Bi={borderRadius:{...H,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomLeftRadius:H,borderBottomRightRadius:H,boxShadow:bi};function ji(e,t,s){const i=M(e)?e:et(e);return i.start(Ie("",i,t,s)),i.animation}function Fi(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Ii=(e,t)=>e.depth-t.depth;class ki{constructor(){this.children=[],this.isDirty=!1}add(t){ke(this.children,t),this.isDirty=!0}remove(t){Ue(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ii),this.isDirty=!1,this.children.forEach(t)}}function Ui(e,t){const s=At.now(),i=({timestamp:o})=>{const c=o-s;c>=t&&(I(i),e(c-t))};return S.read(i,!0),()=>I(i)}const Qe=["TopLeft","TopRight","BottomLeft","BottomRight"],Oi=Qe.length,ee=e=>typeof e=="string"?parseFloat(e):e,se=e=>typeof e=="number"||Be.test(e);function Ni(e,t,s,i,o,c){o?(e.opacity=T(0,s.opacity!==void 0?s.opacity:1,Gi(i)),e.opacityExit=T(t.opacity!==void 0?t.opacity:1,0,Hi(i))):c&&(e.opacity=T(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,i));for(let n=0;n<Oi;n++){const r=`border${Qe[n]}Radius`;let a=ie(t,r),l=ie(s,r);if(a===void 0&&l===void 0)continue;a||(a=0),l||(l=0),a===0||l===0||se(a)===se(l)?(e[r]=Math.max(T(ee(a),ee(l),i),0),(Q.test(l)||Q.test(a))&&(e[r]+="%")):e[r]=l}(t.rotate||s.rotate)&&(e.rotate=T(t.rotate||0,s.rotate||0,i))}function ie(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Gi=ts(0,.5,js),Hi=ts(.5,.95,N);function ts(e,t,s){return i=>i<e?0:i>t?1:s(yt(e,t,i))}function ne(e,t){e.min=t.min,e.max=t.max}function E(e,t){ne(e.x,t.x),ne(e.y,t.y)}function oe(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function re(e,t,s,i,o){return e-=t,e=it(e,1/s,i),o!==void 0&&(e=it(e,1/o,i)),e}function Wi(e,t=0,s=1,i=.5,o,c=e,n=e){if(Q.test(t)&&(t=parseFloat(t),t=T(n.min,n.max,t/100)-n.min),typeof t!="number")return;let r=T(c.min,c.max,i);e===c&&(r-=t),e.min=re(e.min,t,s,r,o),e.max=re(e.max,t,s,r,o)}function ae(e,t,[s,i,o],c,n){Wi(e,t[s],t[i],t[o],t.scale,c,n)}const $i=["x","scaleX","originX"],zi=["y","scaleY","originY"];function le(e,t,s,i){ae(e.x,t,$i,s?s.x:void 0,i?i.x:void 0),ae(e.y,t,zi,s?s.y:void 0,i?i.y:void 0)}function ue(e){return e.translate===0&&e.scale===1}function es(e){return ue(e.x)&&ue(e.y)}function ce(e,t){return e.min===t.min&&e.max===t.max}function Ki(e,t){return ce(e.x,t.x)&&ce(e.y,t.y)}function he(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ss(e,t){return he(e.x,t.x)&&he(e.y,t.y)}function de(e){return A(e.x)/A(e.y)}function fe(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Xi{constructor(){this.members=[]}add(t){ke(this.members,t),t.scheduleRender()}remove(t){if(Ue(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(o=>t===o);if(s===0)return!1;let i;for(let o=s;o>=0;o--){const c=this.members[o];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,s){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,s&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:i}=t;s.onExitComplete&&s.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _i(e,t,s){let i="";const o=e.x.translate/t.x,c=e.y.translate/t.y,n=s?.z||0;if((o||c||n)&&(i=`translate3d(${o}px, ${c}px, ${n}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:l,rotate:u,rotateX:h,rotateY:d,skewX:f,skewY:p}=s;l&&(i=`perspective(${l}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),d&&(i+=`rotateY(${d}deg) `),f&&(i+=`skewX(${f}deg) `),p&&(i+=`skewY(${p}deg) `)}const r=e.x.scale*t.x,a=e.y.scale*t.y;return(r!==1||a!==1)&&(i+=`scale(${r}, ${a})`),i||"none"}const dt=["","X","Y","Z"],Yi={visibility:"hidden"},pe=1e3;let qi=0;function ft(e,t,s,i){const{latestValues:o}=t;o[e]&&(s[e]=o[e],t.setStaticValue(e,0),i&&(i[e]=0))}function is(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=Is(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:o,layoutId:c}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",S,!(o||c))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&is(i)}function ns({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(n={},r=t?.()){this.id=qi++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Qi),this.nodes.forEach(on),this.nodes.forEach(rn),this.nodes.forEach(tn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=n,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new ki)}addEventListener(n,r){return this.eventHandlers.has(n)||this.eventHandlers.set(n,new Oe),this.eventHandlers.get(n).add(r)}notifyListeners(n,...r){const a=this.eventHandlers.get(n);a&&a.notify(...r)}hasListeners(n){return this.eventHandlers.has(n)}mount(n,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Fi(n),this.instance=n;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(n),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(l||a)&&(this.isLayoutDirty=!0),e){let h;const d=()=>this.root.updateBlockedByResize=!1;e(n,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Ui(d,250),J.hasAnimatedSinceResize&&(J.hasAnimatedSinceResize=!1,this.nodes.forEach(ge))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||hn,{onLayoutAnimationStart:g,onLayoutAnimationComplete:m}=u.getProps(),v=!this.targetLayout||!ss(this.targetLayout,p),y=!d&&f;if(this.options.layoutRoot||this.resumeFrom||y||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const R={...Fs(x,"layout"),onPlay:g,onComplete:m};(u.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else d||ge(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const n=this.getStack();n&&n.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,I(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(an),this.animationId++)}getTransformTemplate(){const{visualElement:n}=this.options;return n&&n.getProps().transformTemplate}willUpdate(n=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&is(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:r,layout:a}=this.options;if(r===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),n&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(me);return}this.isUpdating||this.nodes.forEach(sn),this.isUpdating=!1,this.nodes.forEach(nn),this.nodes.forEach(Zi),this.nodes.forEach(Ji),this.clearAllSnapshots();const r=At.now();D.delta=Me(0,1e3/60,r-D.timestamp),D.timestamp=r,D.isProcessing=!0,at.update.process(D),at.preRender.process(D),at.render.process(D),D.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,je.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(en),this.sharedNodes.forEach(ln)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,S.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){S.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!A(this.snapshot.measuredBox.x)&&!A(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const n=this.layout;this.layout=this.measure(!1),this.layoutCorrected=P(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:r}=this.options;r&&r.notify("LayoutMeasure",this.layout.layoutBox,n?n.layoutBox:void 0)}updateScroll(n="measure"){let r=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===n&&(r=!1),r){const a=i(this.instance);this.scroll={animationId:this.root.animationId,phase:n,isRoot:a,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!o)return;const n=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,r=this.projectionDelta&&!es(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;n&&(r||F(this.latestValues)||u)&&(o(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(n=!0){const r=this.measurePageBox();let a=this.removeElementScroll(r);return n&&(a=this.removeTransform(a)),dn(a),{animationId:this.root.animationId,measuredBox:r,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:n}=this.options;if(!n)return P();const r=n.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(fn))){const{scroll:l}=this.root;l&&(U(r.x,l.offset.x),U(r.y,l.offset.y))}return r}removeElementScroll(n){const r=P();if(E(r,n),this.scroll?.wasRoot)return r;for(let a=0;a<this.path.length;a++){const l=this.path[a],{scroll:u,options:h}=l;l!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&E(r,n),U(r.x,u.offset.x),U(r.y,u.offset.y))}return r}applyTransform(n,r=!1){const a=P();E(a,n);for(let l=0;l<this.path.length;l++){const u=this.path[l];!r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&O(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),F(u.latestValues)&&O(a,u.latestValues)}return F(this.latestValues)&&O(a,this.latestValues),a}removeTransform(n){const r=P();E(r,n);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!F(l.latestValues))continue;vt(l.latestValues)&&l.updateSnapshot();const u=P(),h=l.measurePageBox();E(u,h),le(r,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return F(this.latestValues)&&le(r,this.latestValues),r}setTargetDelta(n){this.targetDelta=n,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(n){this.options={...this.options,...n,crossfade:n.crossfade!==void 0?n.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==D.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(n=!1){const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const a=!!this.resumingFrom||this!==r;if(!(n||a&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=D.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),K(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),E(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=P(),this.targetWithTransforms=P()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pi(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):E(this.target,this.layout.layoutBox),Xe(this.target,this.targetDelta)):E(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),K(this.relativeTargetOrigin,this.target,d.target),E(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||vt(this.parent.latestValues)||Ke(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const n=this.getLead(),r=!!this.resumingFrom||this!==n;let a=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(a=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(a=!1),this.resolvedRelativeTargetAt===D.timestamp&&(a=!1),a)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;E(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;mi(this.layoutCorrected,this.treeScale,this.path,r),n.layout&&!n.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(n.target=n.layout.layoutBox,n.targetWithTransforms=P());const{target:f}=n;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oe(this.prevProjectionDelta.x,this.projectionDelta.x),oe(this.prevProjectionDelta.y,this.projectionDelta.y)),z(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!fe(this.projectionDelta.x,this.prevProjectionDelta.x)||!fe(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(n=!0){if(this.options.visualElement?.scheduleRender(),n){const r=this.getStack();r&&r.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=k(),this.projectionDelta=k(),this.projectionDeltaWithTransform=k()}setAnimationOrigin(n,r=!1){const a=this.snapshot,l=a?a.latestValues:{},u={...this.latestValues},h=k();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!r;const d=P(),f=a?a.source:void 0,p=this.layout?this.layout.source:void 0,x=f!==p,g=this.getStack(),m=!g||g.members.length<=1,v=!!(x&&!m&&this.options.crossfade===!0&&!this.path.some(cn));this.animationProgress=0;let y;this.mixTargetDelta=R=>{const L=R/1e3;ye(h.x,n.x,L),ye(h.y,n.y,L),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(K(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),un(this.relativeTarget,this.relativeTargetOrigin,d,L),y&&Ki(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=P()),E(y,this.relativeTarget)),x&&(this.animationValues=u,Ni(u,l,this.latestValues,L,v,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(n){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(I(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=S.update(()=>{J.hasAnimatedSinceResize=!0,this.currentAnimation=ji(0,pe,{...n,onUpdate:r=>{this.mixTargetDelta(r),n.onUpdate&&n.onUpdate(r)},onStop:()=>{},onComplete:()=>{n.onComplete&&n.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const n=this.getStack();n&&n.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const n=this.getLead();let{targetWithTransforms:r,target:a,layout:l,latestValues:u}=n;if(!(!r||!a||!l)){if(this!==n&&this.layout&&l&&os(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||P();const h=A(this.layout.layoutBox.x);a.x.min=n.target.x.min,a.x.max=a.x.min+h;const d=A(this.layout.layoutBox.y);a.y.min=n.target.y.min,a.y.max=a.y.min+d}E(r,a),O(r,u),z(this.projectionDeltaWithTransform,this.layoutCorrected,r,u)}}registerSharedNode(n,r){this.sharedNodes.has(n)||this.sharedNodes.set(n,new Xi),this.sharedNodes.get(n).add(r);const l=r.options.initialPromotionConfig;r.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(r):void 0})}isLead(){const n=this.getStack();return n?n.lead===this:!0}getLead(){const{layoutId:n}=this.options;return n?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:n}=this.options;return n?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:n}=this.options;if(n)return this.root.sharedNodes.get(n)}promote({needsReset:n,transition:r,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),n&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})}relegate(){const n=this.getStack();return n?n.relegate(this):!1}resetSkewAndRotation(){const{visualElement:n}=this.options;if(!n)return;let r=!1;const{latestValues:a}=n;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(r=!0),!r)return;const l={};a.z&&ft("z",n,l,this.animationValues);for(let u=0;u<dt.length;u++)ft(`rotate${dt[u]}`,n,l,this.animationValues),ft(`skew${dt[u]}`,n,l,this.animationValues);n.render();for(const u in l)n.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);n.scheduleRender()}getProjectionStyles(n){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Yi;const r={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=lt(n?.pointerEvents)||"",r.transform=a?a(this.latestValues,""):"none",r;const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=lt(n?.pointerEvents)||""),this.hasProjected&&!F(this.latestValues)&&(f.transform=a?a({},""):"none",this.hasProjected=!1),f}const u=l.animationValues||l.latestValues;this.applyTransformsToTarget(),r.transform=_i(this.projectionDeltaWithTransform,this.treeScale,u),a&&(r.transform=a(u,r.transform));const{x:h,y:d}=this.projectionDelta;r.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,l.animationValues?r.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:r.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const f in Mt){if(u[f]===void 0)continue;const{correct:p,applyTo:x,isCSSVariable:g}=Mt[f],m=r.transform==="none"?u[f]:p(u[f],l);if(x){const v=x.length;for(let y=0;y<v;y++)r[x[y]]=m}else g?this.options.visualElement.renderState.vars[f]=m:r[f]=m}return this.options.layoutId&&(r.pointerEvents=l===this?lt(n?.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(n=>n.currentAnimation?.stop()),this.root.nodes.forEach(me),this.root.sharedNodes.clear()}}}function Zi(e){e.updateLayout()}function Ji(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:o}=e.options,c=t.source!==e.layout.source;o==="size"?w(u=>{const h=c?t.measuredBox[u]:t.layoutBox[u],d=A(h);h.min=s[u].min,h.max=h.min+d}):os(o,t.layoutBox,s)&&w(u=>{const h=c?t.measuredBox[u]:t.layoutBox[u],d=A(s[u]);h.max=h.min+d,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+d)});const n=k();z(n,s,t.layoutBox);const r=k();c?z(r,e.applyTransform(i,!0),t.measuredBox):z(r,s,t.layoutBox);const a=!es(n);let l=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:d}=u;if(h&&d){const f=P();K(f,t.layoutBox,h.layoutBox);const p=P();K(p,s,d.layoutBox),ss(f,p)||(l=!0),u.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=f,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:r,layoutDelta:n,hasLayoutChanged:a,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Qi(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tn(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function en(e){e.clearSnapshot()}function me(e){e.clearMeasurements()}function sn(e){e.isLayoutDirty=!1}function nn(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ge(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function on(e){e.resolveTargetDelta()}function rn(e){e.calcProjection()}function an(e){e.resetSkewAndRotation()}function ln(e){e.removeLeadSnapshot()}function ye(e,t,s){e.translate=T(t.translate,0,s),e.scale=T(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function ve(e,t,s,i){e.min=T(t.min,s.min,i),e.max=T(t.max,s.max,i)}function un(e,t,s,i){ve(e.x,t.x,s.x,i),ve(e.y,t.y,s.y,i)}function cn(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const hn={duration:.45,ease:[.4,0,.1,1]},xe=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Pe=xe("applewebkit/")&&!xe("chrome/")?Math.round:N;function Te(e){e.min=Pe(e.min),e.max=Pe(e.max)}function dn(e){Te(e.x),Te(e.y)}function os(e,t,s){return e==="position"||e==="preserve-aspect"&&!fi(de(t),de(s),.2)}function fn(e){return e!==e.root&&e.scroll?.wasRoot}const pn=ns({attachResizeListener:(e,t)=>X(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pt={current:void 0},rs=ns({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!pt.current){const e=new pn({});e.mount(window),e.setOptions({layoutScroll:!0}),pt.current=e}return pt.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),mn={pan:{Feature:Li},drag:{Feature:Ri,ProjectionNode:rs,MeasureLayout:Je}};function gn(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;t&&(i=t.current);const o=s?.[e]??i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}function as(e,t){const s=gn(e),i=new AbortController,o={passive:!0,...t,signal:i.signal};return[s,o,()=>i.abort()]}function Se(e){return!(e.pointerType==="touch"||He())}function yn(e,t,s={}){const[i,o,c]=as(e,s),n=r=>{if(!Se(r))return;const{target:a}=r,l=t(a,r);if(typeof l!="function"||!a)return;const u=h=>{Se(h)&&(l(h),a.removeEventListener("pointerleave",u))};a.addEventListener("pointerleave",u,o)};return i.forEach(r=>{r.addEventListener("pointerenter",n,o)}),c}function Ve(e,t,s){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",s==="Start");const o="onHover"+s,c=i[o];c&&S.postRender(()=>c(t,_(t)))}class vn extends B{mount(){const{current:t}=this.node;t&&(this.unmount=yn(t,(s,i)=>(Ve(this.node,i,"Start"),o=>Ve(this.node,o,"End"))))}unmount(){}}class xn extends B{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fe(X(this.node.current,"focus",()=>this.onFocus()),X(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ls=(e,t)=>t?e===t?!0:ls(e,t.parentElement):!1,Pn=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Tn(e){return Pn.has(e.tagName)||e.tabIndex!==-1}const W=new WeakSet;function Ae(e){return t=>{t.key==="Enter"&&e(t)}}function mt(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Sn=(e,t)=>{const s=e.currentTarget;if(!s)return;const i=Ae(()=>{if(W.has(s))return;mt(s,"down");const o=Ae(()=>{mt(s,"up")}),c=()=>mt(s,"cancel");s.addEventListener("keyup",o,t),s.addEventListener("blur",c,t)});s.addEventListener("keydown",i,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",i),t)};function De(e){return Dt(e)&&!He()}function Vn(e,t,s={}){const[i,o,c]=as(e,s),n=r=>{const a=r.currentTarget;if(!De(r)||W.has(a))return;W.add(a);const l=t(a,r),u=(f,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),!(!De(f)||!W.has(a))&&(W.delete(a),typeof l=="function"&&l(f,{success:p}))},h=f=>{u(f,a===window||a===document||s.useGlobalTarget||ls(a,f.target))},d=f=>{u(f,!1)};window.addEventListener("pointerup",h,o),window.addEventListener("pointercancel",d,o)};return i.forEach(r=>{(s.useGlobalTarget?window:r).addEventListener("pointerdown",n,o),r instanceof HTMLElement&&(r.addEventListener("focus",l=>Sn(l,o)),!Tn(r)&&!r.hasAttribute("tabindex")&&(r.tabIndex=0))}),c}function Ee(e,t,s){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",s==="Start");const o="onTap"+(s==="End"?"":s),c=i[o];c&&S.postRender(()=>c(t,_(t)))}class An extends B{mount(){const{current:t}=this.node;t&&(this.unmount=Vn(t,(s,i)=>(Ee(this.node,i,"Start"),(o,{success:c})=>Ee(this.node,o,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Tt=new WeakMap,gt=new WeakMap,Dn=e=>{const t=Tt.get(e.target);t&&t(e)},En=e=>{e.forEach(Dn)};function wn({root:e,...t}){const s=e||document;gt.has(s)||gt.set(s,{});const i=gt.get(s),o=JSON.stringify(t);return i[o]||(i[o]=new IntersectionObserver(En,{root:e,...t})),i[o]}function Cn(e,t,s){const i=wn(t);return Tt.set(e,s),i.observe(e),()=>{Tt.delete(e),i.unobserve(e)}}const Rn={some:0,all:1};class Ln extends B{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:i,amount:o="some",once:c}=t,n={root:s?s.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:Rn[o]},r=a=>{const{isIntersecting:l}=a;if(this.isInView===l||(this.isInView=l,c&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=l?u:h;d&&d(a)};return Cn(this.node.current,n,r)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(bn(t,s))&&this.startObserver()}unmount(){}}function bn({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const Mn={inView:{Feature:Ln},tap:{Feature:An},focus:{Feature:xn},hover:{Feature:vn}},Bn={layout:{ProjectionNode:rs,MeasureLayout:Je}},St={current:null},us={current:!1};function jn(){if(us.current=!0,!!ms)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>St.current=e.matches;e.addListener(t),t()}else St.current=!1}const Fn=[...ks,Us,tt],In=e=>Fn.find(Os(e)),kn=new WeakMap;function Un(e,t,s){for(const i in t){const o=t[i],c=s[i];if(M(o))e.addValue(i,o);else if(M(c))e.addValue(i,et(o,{owner:e}));else if(c!==o)if(e.hasValue(i)){const n=e.getValue(i);n.liveStyle===!0?n.jump(o):n.hasAnimated||n.set(o)}else{const n=e.getStaticValue(i);e.addValue(i,et(n!==void 0?n:o,{owner:e}))}}for(const i in s)t[i]===void 0&&e.removeValue(i);return t}const we=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class On{scrapeMotionValuesFromProps(t,s,i){return{}}constructor({parent:t,props:s,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:c,visualState:n},r={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ns,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=At.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,S.render(this.render,!1,!0))};const{latestValues:a,renderState:l,onUpdate:u}=n;this.onUpdate=u,this.latestValues=a,this.baseTarget={...a},this.initialValues=s.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=s,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=r,this.blockInitialAnimation=!!c,this.isControllingVariants=gs(s),this.isVariantNode=ys(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in d){const p=d[f];a[f]!==void 0&&M(p)&&p.set(a[f],!1)}}mount(t){this.current=t,kn.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),us.current||jn(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:St.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),I(this.notifyUpdate),I(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Vt.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=s.on("change",r=>{this.latestValues[t]=r,this.props.onUpdate&&S.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),c=s.on("renderRequest",this.scheduleRender);let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{o(),c(),n&&n(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ft){const s=Ft[t];if(!s)continue;const{isEnabled:i,Feature:o}=s;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):P()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let i=0;i<we.length;i++){const o=we[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const c="on"+o,n=t[c];n&&(this.propEventSubscriptions[o]=this.on(o,n))}this.prevMotionValues=Un(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const i=this.values.get(t);s!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&s!==void 0&&(i=et(s===null?void 0:s,{owner:this}),this.addValue(t,i)),i}readValue(t,s){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Gs(i)||Hs(i))?i=parseFloat(i):!In(i)&&tt.test(s)&&(i=Ws(t,s)),this.setBaseTarget(t,M(i)?i.get():i)),M(i)?i.get():i}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const c=vs(this.props,s,this.presenceContext?.custom);c&&(i=c[t])}if(s&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!M(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Oe),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class cs extends On{constructor(){super(...arguments),this.KeyframeResolver=$s}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:i}){delete s[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;M(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Nn(e){return window.getComputedStyle(e)}class Gn extends cs{constructor(){super(...arguments),this.type="html",this.renderInstance=xs}readValueFromInstance(t,s){if(Vt.has(s))return zs(t,s);{const i=Nn(t),o=(Ps(s)?i.getPropertyValue(s):i[s])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:s}){return _e(t,s)}build(t,s,i){Ts(t,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,s,i){return Ss(t,s,i)}}class Hn extends cs{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=P,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Vs(this.current,this.renderState)}}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Vt.has(s)){const i=Ks(s);return i&&i.default||0}return s=Ds.has(s)?s:As(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,i){return Es(t,s,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&S.postRender(this.updateDimensions)}build(t,s,i){ws(t,s,this.isSVGTag,i.transformTemplate)}renderInstance(t,s,i,o){Cs(t,s,i,o)}mount(t){this.isSVGTag=Rs(t.tagName),super.mount(t)}}const Wn=(e,t)=>Ls(e)?new Hn(t):new Gn(t,{allowProjection:e!==st.Fragment}),$n={renderer:Wn,...ni,...Mn},Jn={...$n,...mn,...Bn};export{ki as F,Gn as H,Hn as S,On as V,ni as a,mn as b,Wn as c,Jn as d,P as e,Fi as f,Mn as g,us as h,jn as i,ji as j,X as k,Bn as l,pt as m,$ as n,ri as o,St as p,A as q,gn as r,$n as s,Ui as t,yn as u,kn as v,He as w,Vn as x,Xt as y,yi as z};
